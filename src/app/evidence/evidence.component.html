<div class="minimal-dashboard-container no-scroll" [@fadeAnimation]>

    <!-- Contenedor del fondo con degradado -->
    <div class="bg-gradient"></div>

    <!-- Marca de agua -->
    <div class="watermark">
        <span class="watermark-smart">SMART</span>
        <span class="watermark-mobility">MOBILITY BACKOFFICE</span>
    </div>

    <!-- Header -->
    <header class="minimal-header">
        <button class="back-button" (click)="goBack()" title="Atrás" >
            <fa-icon [icon]="iconArrowLeft"></fa-icon>
        </button>
        <h1 class="right-aligned-title">Generación de Evidencias</h1>
        <button class="back-button" (click)="goToLogin()" title="Cerrar sesión">
            <fa-icon [icon]="iconLogout"></fa-icon> <!-- Ícono de puerta abierta -->
        </button>
        <div class="header-spacer"></div>
    </header>

    <!-- Contenido principal -->
    <main class="minimal-main-content">
        <!-- Sección del Calendario -->
        <div class="glassmorphism-card calendar-section">
            <h3><fa-icon [icon]="iconCalendar"></fa-icon> Seleccionar Fecha</h3>
            <div class="date-picker-container">
                <input type="date" [(ngModel)]="selectedDate" [max]="maxDate" class="custom-date-picker">
                <button class="glassmorphism-btn primary consult-btn" (click)="cargarConteo(selectedDate)"
                    [disabled]="!selectedDate || isLoading"><fa-icon [icon]="iconSearch"></fa-icon> Consultar
                </button>
            </div>
        </div>

        <!-- Sección de Descargas -->
        <div class="glassmorphism-card download-section">
            <h2><fa-icon [icon]="iconDownload"></fa-icon> Descargar</h2>
        
            <div class="evidence-grid">
                <!-- Evidencias -->
                <div class="evidence-row">
                    <span class="evidence-label">Formato Evidencias:</span>
                    <span class="evidence-counter">{{conteoEvidencias}}</span>
                    <button class="download-btn glassmorphism-btn accent"
                            [disabled]="conteoEvidencias === 0 || loadingEvidence"
                            (click)="descargarFormatoEvidencia()">
                        <fa-icon [icon]="loadingEvidence ? iconSpinner : iconDownload" 
                                [animation]="loadingEvidence ? 'spin' : undefined"></fa-icon>
                    </button>
                </div>
        
                <!-- Formato Único -->
                <div class="evidence-row">
                    <span class="evidence-label">Formato Único:</span>
                    <span class="evidence-counter">{{conteoFormatos}}</span>
                    <button class="download-btn glassmorphism-btn accent" 
                            [disabled]="conteoFormatos === 0 || loadingFormat"
                            (click)="descargarFormatoUnico()">
                        <fa-icon [icon]="loadingFormat ? iconSpinner : iconDownload" 
                                [animation]="loadingFormat ? 'spin' : undefined"></fa-icon>
                    </button>
                </div>
        
                <!-- Formato Mensajería -->
                <div class="evidence-row">
                    <span class="evidence-label">Formato Mensajería:</span>
                    <span class="evidence-counter">{{conteoFormatos}}</span>
                    <button class="download-btn glassmorphism-btn accent"
                            [disabled]="conteoFormatos === 0 || loadingMensajeria"
                            (click)="descargarFormatoMensajeria()">
                        <fa-icon [icon]="loadingMensajeria ? iconSpinner : iconDownload" 
                                [animation]="loadingMensajeria ? 'spin' : undefined"></fa-icon>
                    </button>
                </div>
        
                <!-- Formato SIMIT -->
                <div class="evidence-row">
                    <span class="evidence-label">Formato SIMIT:</span>
                    <span class="evidence-counter">{{conteoFormatos}}</span>
                    <button class="download-btn glassmorphism-btn accent"
                            [disabled]="conteoFormatos === 0 || loadingSIMIT"
                            (click)="descargarFormatoSIMIT()">
                        <fa-icon [icon]="loadingSIMIT ? iconSpinner : iconDownload" 
                                [animation]="loadingSIMIT ? 'spin' : undefined"></fa-icon>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="minimal-footer">
        <p>Copyright © 2025. Todos los derechos reservados.</p>
    </footer>
</div>